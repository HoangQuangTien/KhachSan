<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DragonBall Hotel</title>
    <!-- Bootstrap CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" th:href="@{/css/styleKH.css}"/>


</head>

</head>
<body>
<div class="container-fluid p-0 position-relative">
    <!-- Background Image -->
    <!-- Carousel -->
    <div id="carouselExample" class="carousel slide" data-ride="carousel" data-interval="2000">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img th:src="@{/img/296817374_1015897554.jpg}" class="d-block w-100" alt="Slide 1" style="height: 100vh; object-fit: cover;">
            </div>
            <div class="carousel-item">
                <img th:src="@{/img/phong-khach-san-dep-de-chup-anh-o-ha-noi-3.jpg}" class="d-block w-100" alt="Slide 2" style="height: 100vh; object-fit: cover;">
            </div>
            <div class="carousel-item">
                <img th:src="@{/img/anhPhongKS1.jpg}" class="d-block w-100" alt="Slide 3" style="height: 100vh; object-fit: cover;">
            </div>
        </div>
    </div>

    <img th:src="@{/img/logo-Photoroom.png}" class="logo position-absolute" alt="Logo">
    <!-- Overlay content -->
    <div class="overlay position-absolute top-0 start-0 w-100 h-100 d-flex flex-column justify-content-center align-items-center text-center" style="background: rgba(0, 0, 0, 0.5);">

        <!-- Title -->
        <h1 class="text-white mb-3 text-center">Chào Mừng Đến Với DragonBall HOTEL</h1>

        <!-- Subtitle -->
        <p class="text-white mb-4 text-center">Tìm kiếm để so sánh giá cả và khám phá ưu đãi tuyệt vời</p>

        <!-- Search Bar -->
        <form class="search-bar p-4 bg-white rounded shadow-sm d-flex align-items-center justify-content-between">
            <!-- Location Search -->
            <div class="input-group me-2 w-25">
        <span class="input-group-text bg-transparent border-0">
            <i class="bi bi-search"></i>
        </span>
                <input type="text" class="form-control border-0" placeholder="Loại Phòng" aria-label="Search location">
            </div>

            <!-- Check-in & Check-out Section -->
            <div class="check-in-out d-flex align-items-center">
                <!-- Check-in -->
                <div class="input-group me-2">
                    <input type="datetime-local" id="checkin" class="form-control border-0" placeholder="Nhận phòng">
                </div>

                <!-- Check-out -->
                <div class="input-group me-2">
                    <input type="datetime-local" id="checkout" class="form-control border-0" placeholder="Trả phòng">
                </div>
            </div>


            <!-- Guests -->
            <div class="input-group me-2 w-25">
                <input type="text" class="form-control border-0" placeholder="So nguoi">
            </div>

            <!-- Search Button -->
            <button class="btn btn-primary px-4">Tìm</button>
        </form>


        <!-- Login Button -->
        <div class="login-button-container position-absolute top-0 end-0 m-3">
            <a href="/login" class="btn btn-outline-light">Đăng Nhập</a>
        </div>

        <div class="Home-button-container d-flex align-items-center position-absolute top-0 end-0 m-3">
            <!-- Trang Chủ -->
            <a href="/khach-hang" class="text-link mb-2 p-2">Trang Chủ</a>
            <!-- Giới Thiệu -->
            <a href="/about" class="text-link mb-2 p-2">Giới Thiệu</a>
            <!-- Hạng Phòng -->
            <div class="room-class-container">
                <div id="room-classes-button" class="text-link mb-2 p-2" style="cursor: pointer;">Hạng Phòng</div>
                <ul id="room-class-list" class="dropdown-menu" style="list-style: none; padding: 0; margin: 0;">
                    <li data-loai-phong-id="1">Standard</li>
                    <li data-loai-phong-id="2">Superior</li>
                    <li data-loai-phong-id="3">Family suite</li>
                    <li data-loai-phong-id="4">Deluxe</li>
                </ul>
            </div>



        </div>
    </div>

    <!-- Các nút chọn ngôn ngữ -->
    <div class="language-buttons d-flex top-0 end-0">
        <div id="vi-btn" class="language-option p-2" style="display: flex; align-items: center; cursor: pointer;" >
            <img src="https://upload.wikimedia.org/wikipedia/commons/2/21/Flag_of_Vietnam.svg" alt="Cờ Việt Nam" style="width: 20px; height: 15px; margin-right: 5px;">
            Tiếng Việt
        </div>
        <div id="en-btn" class="language-option p-2" style="display: flex; align-items: center; cursor: pointer;">
            <img src="https://upload.wikimedia.org/wikipedia/en/a/ae/Flag_of_the_United_Kingdom.svg" alt="Cờ Anh" style="width: 20px; height: 15px; margin-right: 5px;">
            English
        </div>
    </div>
</div>
<!--<div id="top-rooms-section" class="container mt-5" style="display: none;"> &lt;!&ndash; Mặc định ẩn &ndash;&gt;-->
<!--    <h2 class="text-center">Top 6 Phòng Được Đặt Nhiều Nhất</h2>-->
<!--    <div id="top-rooms-list" class="row"></div>-->
<!--</div>-->
<div id="top-rooms-section" class="row mt-4"> <div id="top-rooms-list" class="col-md-12 d-flex flex-wrap justify-content-center"> <!-- Danh sách phòng sẽ được tải vào đây --> </div> </div>


<footer class="bg-dark text-white py-4 mt-2">
    <div class="container">
        <div class="row">
            <!-- Google Maps Embed (Left) -->
            <div class="col-md-6">
                <h5 class="text-white">Vị trí của chúng tôi</h5>
                <div class="map-container">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d4337.097401206077!2d105.74389980195575!3d21.045412325554775!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x313455b3f6710da1%3A0x240105831b77a1a2!2zVHLGsOG7nW5nIENhbyDEkeG6s25nIEZQVCBQb2x5dGVjaG5pYw!5e0!3m2!1sen!2s!4v1728742407402!5m2!1sen!2s" width="100%" height="300" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                </div>

            </div>

            <!-- Contact Info (Right) -->
            <div class="col-md-6">
                <h5 class="text-white" id="footerContact">Thông tin liên hệ</h5>
                <p class="mb-0" id="footerAddress">Địa chỉ: P. Kiều Mai, Phúc Diễn, Từ Liêm, Hà Nội</p>
                <p id="footerEmail">Email: contact@dragonballhotel.com</p>
                <p id="footerPhone">Phone: +84 397156204</p>
                <ul class="list-inline">
                    <li class="list-inline-item"><a href="#" class="text-white">Facebook</a></li>
                    <li class="list-inline-item"><a href="#" class="text-white">Instagram</a></li>
                    <li class="list-inline-item"><a href="#" class="text-white">Twitter</a></li>
                </ul>
            </div>

        </div>
        <!-- Divider -->
        <div class="divider"></div>
        <!-- Copyright Section -->
        <div class="text-center mt-4">
            <p class="copyright mb-0">&copy; 2024 DragonBall Hotel. All Rights Reserved.</p>
        </div>
    </div>
</footer>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const topRoomsList = document.getElementById('top-rooms-list');
        const roomClassesButton = document.getElementById('room-classes-button');
        const roomClassList = document.getElementById('room-class-list');

        // Lấy ID loại phòng từ URL
        const urlParams = new URLSearchParams(window.location.search);
        const loaiPhongId = urlParams.get('loaiPhongId');

        if (loaiPhongId) {
            loadRoomsByType(loaiPhongId);
        } else {
            topRoomsList.innerHTML = '<p class="text-center">Không có loại phòng nào được chọn.</p>';
        }

        // Hàm tải phòng theo loại
        function loadRoomsByType(roomTypeId) {
            topRoomsList.innerHTML = '<p>Đang tải phòng...</p>'; // Hiện thông báo tải dữ liệu
            fetch(`/phong-theo-loai?loaiPhongId=${roomTypeId}`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Không thể tải danh sách phòng. Vui lòng thử lại sau.');
                    }
                    return response.json();
                })
                .then(data => {
                    displayRooms(data); // Gọi hàm hiển thị danh sách phòng
                })
                .catch(error => {
                    console.error('Có lỗi xảy ra khi tải dữ liệu phòng:', error);
                    topRoomsList.innerHTML = '<p class="text-center text-danger">Có lỗi xảy ra khi tải dữ liệu phòng. Vui lòng thử lại sau.</p>';
                });
        }

        // Hàm hiển thị danh sách phòng
        function displayRooms(rooms) {
            topRoomsList.innerHTML = ''; // Xóa nội dung cũ
            if (!Array.isArray(rooms) || rooms.length === 0) {
                topRoomsList.innerHTML = '<p class="text-center text-black">Không có phòng nào được tìm thấy.</p>'; // Thay 'text-danger' thành 'text-black'
                return;
            }

            rooms.forEach(room => {
                console.log("Dữ liệu phòng nhận được:", room); // Kiểm tra toàn bộ dữ liệu phòng

                const roomCard = document.createElement('div');
                roomCard.classList.add('col-md-4', 'mb-4');

                // Kiểm tra và lấy tên loại phòng
                let roomType = room.tenLoaiPhong ? room.tenLoaiPhong.trim() : 'Không xác định';
                console.log("Loại phòng sau khi trim:", roomType);

                let imageUrl;
                // Xác định hình ảnh dựa trên loại phòng
                switch (roomType) {
                    case "Standard":
                        imageUrl = "/img/Executive-double_2.jpg";
                        break;
                    case "Superior":
                        imageUrl = "/img/khach-san-muong-thanh-luxuru-ha-long-3.jpg";
                        break;
                    case "Family suite":
                        imageUrl = "/img/hang-phong-grand-suite-4.jpg";
                        break;
                    case "Deluxe":
                        imageUrl = "/img/anhks.jpg";
                        break;
                    default:
                        imageUrl = "/img/logo.jpg"; // Hình ảnh mặc định
                        console.warn("Hình ảnh mặc định được sử dụng cho loại phòng:", roomType);
                        break;
                }
                roomCard.innerHTML = `
    <div class="card room-card">
        <img src="${imageUrl}" class="card-img-top" alt="${room.tenPhong}">
        <div class="card-body text-center">
            <h5 class="card-title">${room.tenPhong} (Phòng ${room.soNguoiToiDa} người)</h5>
            <p class="card-text">Giá: ${room.gia.toLocaleString('vi-VN', { style: 'currency', currency: 'VND' })}</p>
            <a class="btn btn-primary">Đặt ngay</a>
        </div>
    </div>



                `;
                topRoomsList.appendChild(roomCard); // Thêm thẻ phòng vào danh sách
            });
        }


        // Hiển thị/dừng danh sách loại phòng khi click
        roomClassesButton.addEventListener('click', function () {
            roomClassList.style.display = roomClassList.style.display === 'block' ? 'none' : 'block';
        });

        // Gọi hàm khi click vào loại phòng
        roomClassList.querySelectorAll('li').forEach(item => {
            item.addEventListener('click', function () {
                const selectedTypeId = this.getAttribute('data-loai-phong-id');
                loadRoomsByType(selectedTypeId);
                roomClassList.style.display = 'none'; // Ẩn danh sách loại phòng sau khi chọn
            });
        });

        // Ẩn danh sách loại phòng khi click ra ngoài
        document.addEventListener('click', function (event) {
            if (!roomClassList.contains(event.target) && event.target !== roomClassesButton) {
                roomClassList.style.display = 'none';
            }
        });
    });
</script>
</body>
</html>
