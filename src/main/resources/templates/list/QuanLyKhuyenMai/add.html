<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Thêm Khuyến Mãi</title>
    <link rel="stylesheet" th:href="@{/css/addKM.css}">
</head>
<body>
<div class="container">
    <h1>Thêm Khuyến Mãi</h1>
    <!-- Hiển thị thông báo lỗi nếu có -->
    <div th:if="${errorMessage}" class="alert alert-danger" role="alert">
        <p th:text="${errorMessage}"></p>
    </div>

    <!-- Hiển thị thông báo thành công nếu có -->
    <div th:if="${successMessage}" class="alert alert-success" role="alert">
        <p th:text="${successMessage}"></p>
    </div>
    <form action="#" th:action="@{/admin/add}" th:object="${khuyenMai}" method="post" class="form">
        <div class="form-group">
            <label for="maKhuyenMai">Mã Khuyến Mãi:</label>
            <div class="input-group">
                <input type="text" id="maKhuyenMai" th:field="*{maKhuyenMai}" class="form-control" />
                <!--                <div class="input-group-append">-->
                <!--                    <button type="button" class="btn btn-outline-secondary" onclick="generateMaKhuyenMai()">-->
                <!--&lt;!&ndash;                        <i class="fas fa-sync-alt"></i> &lt;!&ndash; Icon cho nút &ndash;&gt;&ndash;&gt;-->
                <!--                    </button>-->
                <!--                </div>-->
            </div>
            <div th:if="${#fields.hasErrors('maKhuyenMai')}" class="error-message text-danger mt-1">
                <p th:errors="*{maKhuyenMai}"></p>
            </div>
        </div>



        <div class="form-group">
            <label for="tenKhuyenMai">Tên Khuyến Mãi:</label>
            <input type="text" id="tenKhuyenMai" th:field="*{tenKhuyenMai}" class="form-control" />
            <div th:if="${#fields.hasErrors('tenKhuyenMai')}" class="error-message">
                <p th:errors="*{tenKhuyenMai}"></p>
            </div>
        </div>

        <div class="form-group">
            <label for="moTa">Mô Tả:</label>
            <input type="text" id="moTa" th:field="*{moTa}" class="form-control" />
            <div th:if="${#fields.hasErrors('moTa')}" class="error-message">
                <p th:errors="*{moTa}"></p>
            </div>
        </div>

        <div class="form-group">
            <label for="ngayBatDau">Ngày Bắt Đầu:</label>
            <input type="date" id="ngayBatDau" th:field="*{ngayBatDau}" class="form-control" />
            <div th:if="${#fields.hasErrors('ngayBatDau')}" class="error-message">
                <p th:errors="*{ngayBatDau}"></p>
            </div>
        </div>

        <div class="form-group">
            <label for="ngayKetThuc">Ngày Kết Thúc:</label>
            <input type="date" id="ngayKetThuc" th:field="*{ngayKetThuc}" class="form-control" />
            <div th:if="${#fields.hasErrors('ngayKetThuc')}" class="error-message">
                <p th:errors="*{ngayKetThuc}"></p>
            </div>
        </div>

        <div class="form-group">
            <label for="giamGia">Giảm Giá:</label>
            <input type="number" step="0.01" id="giamGia" th:field="*{giamGia}" class="form-control" />
            <!--            <div th:if="${#fields.hasErrors('giaGiam')}" class="error-message">-->
            <!--                <p th:errors="*{giaGiam}"></p>-->
            <!--            </div>-->
        </div>

        <div class="form-group">
            <label for="loaiGiam">Loại Giảm:</label>
            <select id="loaiGiam" th:field="*{loaiGiam}" class="form-control">
                <option value="true">Phần trăm</option>
                <option value="false">Tiền mặt</option>
            </select>
            <div th:if="${#fields.hasErrors('loaiGiam')}" class="error-message">
                <p th:errors="*{loaiGiam}"></p>
            </div>
        </div>

        <div class="form-group">
            <label>Trạng thái:</label>
            <input id="trangThaiConHan" type="radio" name="trangThai" checked><label for="trangThaiConHan" >Còn hạn</label>
            <input id="trangThaiHetHan" type="radio" name="trangThai"><label for="trangThaiHetHan" >Hết hạn</label>
        </div>
        <a href="#" th:href="@{/admin/quan-ly-khuyen-mai}">Quay lại</a>

        <button type="submit" class="btn-submit">Thêm</button>

    </form>
</div>

<div th:include="fragment/script :: script"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<script crossorigin="anonymous"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
<script>
    function generateMaKhuyenMai() {
        var length = 6; // Độ dài của mã khuyến mãi
        var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'; // Chỉ sử dụng chữ cái
        var result = '';
        var charactersLength = characters.length;

        for (var i = 0; i < length; i++) {
            result += characters.charAt(Math.floor(Math.random() * charactersLength));
        }

        // Gán mã khuyến mãi mới vào input
        document.getElementById('maKhuyenMai').value = result;
    }


</script>

</body>
</html>
